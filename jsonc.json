{
    "AWS CloudFormation base": {
        "prefix": "s-cloudformation",
        "body": [
            "//",
            "//",
            "// https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html",
            "// https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/pseudo-parameter-reference.html",
            "// https://theburningmonk.com/cloudformation-ref-and-getatt-cheatsheet/",
            "//",
            "// aws cloudformation list-stacks | jq .StackSummaries[].StackName -r",
            "// aws cloudformation describe-stacks --stack-name $TM_FILENAME_BASE",
            "// aws cloudformation describe-stack-resources --stack-name $TM_FILENAME_BASE",
            "// aws cloudformation get-template --stack-name $TM_FILENAME_BASE",
            "// aws cloudformation get-template --stack-name $TM_FILENAME_BASE | jq .TemplateBody -r",
            "// aws cloudformation create-stack --stack-name $TM_FILENAME_BASE --template-body '{\"Resources\": {\"Placeholder\": {\"Type\": \"AWS::S3::Bucket\"}}}'",
            "//",
            "// aws cloudformation update-stack --stack-name $TM_FILENAME_BASE \\",
            "//   --template-body \"$(cat $TM_FILENAME_BASE.json | strip-json-comments)\" \\",
            "//   --capabilities CAPABILITY_NAMED_IAM",
            "//",
            "// aws cloudformation describe-stacks --stack-name $TM_FILENAME_BASE | jq .Stacks[].Outputs -r",
            "//",
            "// \"DeliveryStreamName\": {\"Value\": {\"Ref\": \"DeliveryStream\"}}",
            "// \"BucketARN\": {\"Value\": {\"Fn::GetAtt\": [\"Bucket\", \"Arn\"]}}",
            "// \"RoleARN\": {\"Value\": {\"Fn::GetAtt\": [\"Role\", \"Arn\"]}}",
            "//",
            "// {\"Fn::Join\": [\"\", [{\"Fn::GetAtt\": [\"Bucket\", \"Arn\"]}, \"/*\"]]}",
            "{",
            "  \"Resources\": {",
            "    \"Placeholder\": {",
            "      \"Type\": \"AWS::S3::Bucket\"",
            "    },",
            "    // https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html",
            "    \"Role\": {",
            "      \"Type\": \"AWS::IAM::Role\",",
            "      \"Properties\": {",
            "        \"AssumeRolePolicyDocument\": {",
            "          \"Version\": \"2012-10-17\",",
            "          \"Statement\": [",
            "            // {",
            "            //   \"Effect\": \"Allow\",",
            "            //   \"Principal\": {",
            "            //     \"Service\": \"firehose.amazonaws.com\"",
            "            //   },",
            "            //   \"Action\": \"sts:AssumeRole\"",
            "            // }",
            "          ]",
            "        },",
            "        \"Policies\": [{",
            "          \"PolicyDocument\": {",
            "            \"Version\": \"2012-10-17\",",
            "            \"Statement\": [",
            "              // // See https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_examples.html",
            "              // // , or AWS IAM \"Create policy\" Visual editor",
            "              // {",
            "              //   \"Sid\": \"\",",
            "              //   \"Effect\": \"Allow\",",
            "              //   \"Action\": ...,",
            "              //   \"Resource\": ...",
            "              // }",
            "            ]",
            "          },",
            "          \"PolicyName\": \"allow-whats-needed\"",
            "        }]",
            "      }",
            "    },",
            "    // https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kinesisfirehose-deliverystream.html",
            "    // aws firehose describe-delivery-stream --delivery-stream-name some-manually-configured-delivery-stream",
            "    \"DeliveryStream\": {",
            "      \"Type\": \"AWS::KinesisFirehose::DeliveryStream\",",
            "      \"Properties\": {",
            "        \"DeliveryStreamType\": \"DirectPut\",",
            "        // ...",
            "      }",
            "    },",
            "    // https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-logs-loggroup.html",
            "    \"LogGroup\": {",
            "      \"Type\": \"AWS::Logs::LogGroup\",",
            "      \"Properties\": {",
            "        \"RetentionInDays\": 1",
            "      }",
            "    },",
            "    // https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-logs-logstream.html",
            "    \"LogStream\": {",
            "      \"Type\": \"AWS::Logs::LogStream\",",
            "      \"Properties\": {",
            "        \"LogGroupName\": {\"Ref\": \"LogGroup\"}",
            "      }",
            "    }",
            "  },",
            "  \"Outputs\": {",
            "    \"DeliveryStreamName\": {\"Value\": {\"Ref\": \"DeliveryStream\"}}",
            "  }",
            "}",
            ""
        ],
        "description": ""
    }
}
